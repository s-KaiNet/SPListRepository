var SPListRepo=SPListRepo||{};SPListRepo.Helpers=function(){"use strict";return{ensureTrailingSlash:function(a){return a.endsWith("/")?a:a+"/"},ensureLeadingSlash:function(a){return a.startsWith("/")?a:"/"+a}}}(jQuery),SPListRepo.RequestError=function(){"use strict";function a(a){a instanceof SP.ClientRequestFailedEventArgs?(this.stackTrace=a.get_stackTrace(),this.message=a.get_message(),this.correlation=a.get_errorTraceCorrelationId(),this.errorCode=a.get_errorCode(),this.details=a.get_errorDetails(),this.errorType=a.get_errorTypeName()):"string"==typeof a&&(this.message=a)}return a}(),SPListRepo.RequestError.registerClass("SPListRepo.RequestError"),SPListRepo.ListService=function(a){"use strict";var b={};return{getListByUrl:function(c){if(b[c])return a.when(b[c]);var d=a.Deferred(),e=SPListRepo.Helpers.ensureTrailingSlash(_spPageContextInfo.webAbsoluteUrl),f=SPListRepo.Helpers.ensureTrailingSlash(_spPageContextInfo.webServerRelativeUrl),g=String.format("{0}_api/web/lists/?$expand=RootFolder&$filter=RootFolder/ServerRelativeUrl eq '{1}{2}'&$select=ID",e,f,c);return console.log(g),a.ajax({url:g,type:"GET",contentType:"application/json;odata=verbose",headers:{Accept:"application/json;odata=verbose"},success:function(a){var e=SP.ClientContext.get_current(),f=e.get_web().get_lists().getById(a.d.results[0].Id);e.load(f),e.executeQueryAsync(function(){b[c]=f,d.resolve(f)},function(a,b){d.reject(new SPListRepo.RequestError(b))})},error:function(a,b){d.reject(new SPListRepo.RequestError(b))}}),d.promise()}}}(jQuery);